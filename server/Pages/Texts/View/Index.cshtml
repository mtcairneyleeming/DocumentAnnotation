@page
@using DocumentAnnotation.Extensions
@using DocumentAnnotation.Pages.Partials
@using DocumentAnnotation.Pages.Texts.View
@using Serilog
@model DocumentAnnotation.Pages.Texts.View.IndexModel

@{
    ViewData["Title"] = Model.TextData.Title + ", " + Model.TextData.Author;
}

@section Styles {
    @await Html.WebpackStylesAsync("page-text-view")
}

@section Scripts {
    @await Html.WebpackScriptsAsync("page-text-view")
    @Html.JsonDataBlock("text-names", Model._loader.CloneNames(Model.FullText.Identifier))
    @Html.JsonDataBlock("info", new
    {
        bookId = Model.Book.Name,
        sectionId = Model.Section.Name,
    })

}

<h2>@(Model.TextData.Title + ", " + Model.TextData.Author)</h2>


<div class="row">
    <div class="col-md-8">

        <h3>Book @Html.DisplayFor(m => m.Book.Name), Section @Html.DisplayFor(m => m.Section.Name)</h3>
        <hr/>
        <p>
            @foreach (var group in Model.Section.Groups)
            {
                <span class="group">@(string.Join(" ", group.Data) + (group.AddNewLine ? "\n" : ""))</span>
            }
        </p>
    </div>
    <div class="col-md-4">
        @await Html.PartialAsync("Partials/TextNavigation")
        @await Html.PartialAsync("Partials/TextDetails", new TextDetails(Model.TextData, Model.Book.Name, Model.Section.Name))
    </div>
</div>